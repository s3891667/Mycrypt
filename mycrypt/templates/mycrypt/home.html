<!DOCTYPE html>
<html>
  <head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'mycrypt/css/style.css' %}">
    <link rel="stylesheet" href="{% static 'mycrypt/css/bootstrap.css' %}">
    <title>MyCrypt</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.1/socket.io.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
</head>
<section class="header">
  <nav>
    <img src="{% static 'mycrypt/img/logo.png' %}" alt="LOGO" width="100px">
    <h1 class="logo" >MyCrypt</h1>
    <div class="nav-link" id="navlink">
      <ul>
        <li><a href="{% url 'mycrypt:home' %}" style="color:#FFFFFB">Cyrptocurrencies</a></li>
        <li><a href="{% url 'mycrypt:learn' %}">Learn</a></li>
        <li><a href="{% url 'mycrypt:watchlist'%}">Watchlist</a></li>
        {% block function %}
        {% if current_user %}
        <button class="nav-button">
              <a href="{%url 'mycrypt:logout'%}">Logout</a>
            </button>
            <br>
            {% else %}
            <button class="nav-button">
              <a href="{% url 'mycrypt:login' %}">Login</a>
            </button>
            <button class="nav-button" >
              <a href="{% url 'mycrypt:signup' %}">Sign Up</a>
            </button>
            {% endif %}
            {% if role == 'investor' %}
            <button class="nav-button" >
              <a href="{% url 'mycrypt:post' %}">Create post</a>
            </button>
        {% endif %}
        {% endblock %}
          </div>
        </ul>
      </div>
    </nav>
  </section>
  <body>
    {% block content %}
    <div class="forgot">
      <div class="container-home">
        
        <div class="cont-head">
          <input type="text" placeholder="Search..">
          <h1>Cyrptocurrencies</h1>
        </div>
          <br><br>
          <div class="date">
            <form method = "POST">
              {%csrf_token%}
              <button onclick="window.location.reload();" name="period" type="submit", value="24h">24H</button>
              <button onclick="window.location.reload();" name="period" type="submit", value="7d">7D</button>
              <button onclick= "window.location.reload();"name ="period" type="submit", value="14d">14D</button>
            </form>
          </div>
          <br><br>
          <section class="p-5">
            <div class="container table-bordered table-responsive">
              <table class="table table-hover">
                <caption class="caption-top">
                  watchlist
                </caption>
                
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Coin</th>
                    <th scope="col">Price</th>
                    <th scope="col">Price changed</th>
                  </tr>
                </thead>
                {% for data in icon %}
                <tbody>
                  <tr>
                    <td>
                      <img src="{{data.image}}" width="25px">
                    </td>
                        <td>
                        <a href="{% url 'mycrypt:coins' coin_name=data.name %}">
                          <span onclick="myfunc(this)" >{{data.symbol}}</span>
                        </a>
                        </td>
                        <td>{{data.current_price}}$</td>
                        {% if period == "24h"%}
                        <td class="value" >{{data.price_change_percentage_24h_in_currency}}</td>
                        {% elif period == "7d"%}
                        <td class="value">{{data.price_change_percentage_7d_in_currency}}</td>
                        {% elif period == "14d"%}
                        <td class="value">{{data.price_change_percentage_14d_in_currency}}</td>
                        {% endif %} 
                  </tr>
                </tbody>
                {% endfor %}
              </table>
            </div>
          </section>

          <nav aria-label="Page navigation example">
                <ul class="pagination">
                  <li class="page-item">
                    <a onclick="" class="page-link" href="#" aria-label="Previous">
                      <span aria-hidden="true">&laquo;</span>
                      <span class="sr-only">Previous</span>
                    </a>
          </li>
          <li class="page-item"><a class="page-link" href="#">1</a></li>
          <li class="page-item"><a class="page-link" href="#">2</a></li>
          <li class="page-item"><a class="page-link" href="#">3</a></li>
          <li class="page-item">
            <a class="page-link" href="#" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
              <span class="sr-only">Next</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
  <script >
    function myfunc(val) {
      window.localStorage.setItem('coin',val.innerHTML);
      document.getElementsByClassName
    };

    for (var i=0; i <200; i++) {
      data = parseFloat(document.getElementsByClassName('value')[i].innerHTML).toFixed(2);
      document.getElementsByClassName('value')[i].innerHTML = data.toString() + "%";
    }
  </script>
  {% endblock %}
  <div class="footer">
    <h1><img src="{% static 'mycrypt/img/Ramen.png' %}" alt="LOGO" width="50px">mycrypt</h1>
    <p>Learn how to purchase and manage Cyrptocurrency</p>
    <p class="lead">Copyright &copy; mycrypt 2022</p>
  </div>
</body>
</html>